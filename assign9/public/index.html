<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Experiment 9 - Pagination</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <h2>User List (with Pagination)</h2>
  <div id="user-container"></div>

  <div id="pagination-controls">
    <button id="prev-btn">Previous</button>
    <span id="page-info"></span>
    <button id="next-btn">Next</button>
  </div>

  <script>
    let currentPage = 1;
    const container = document.getElementById('user-container');
    const pageInfo = document.getElementById('page-info');

    async function loadPage(page) {
      const res = await fetch(`/users?page=${page}`);
      const data = await res.json();

      container.innerHTML = "";
      data.users.forEach(user => {
        const div = document.createElement('div');
        div.classList.add('user-card');
        div.innerHTML = `<strong>${user.name}</strong><br>${user.email}`;
        container.appendChild(div);
      });

      pageInfo.textContent = `Page ${data.currentPage} of ${data.totalPages}`;
      document.getElementById('prev-btn').disabled = data.currentPage === 1;
      document.getElementById('next-btn').disabled = data.currentPage === data.totalPages;

      currentPage = data.currentPage;
    }

    document.getElementById('prev-btn').addEventListener('click', () => loadPage(currentPage - 1));
    document.getElementById('next-btn').addEventListener('click', () => loadPage(currentPage + 1));

    loadPage(1);
  </script>
</body>
</html>
